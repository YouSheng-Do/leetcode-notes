# [2975. Maximum Square Area by Removing Fences From a Field](https://leetcode.com/problems/maximum-square-area-by-removing-fences-from-a-field/)
## ğŸ§  é¡Œç›®æ€è·¯ï¼ˆIntuitionï¼‰

- **ä¸€å¥è©±ç¸½çµ**ï¼šæŠŠã€Œæœ€å¤§æ­£æ–¹å½¢ã€è½‰æˆã€Œæ‰¾å‡ºæ°´å¹³èˆ‡å‚ç›´å…©æ–¹å‘å…±åŒå­˜åœ¨çš„æœ€å¤§é‚Šé•·å·®å€¼ã€ã€‚
- **è§€å¯Ÿ**
  - ä¸€å€‹æ­£æ–¹å½¢éœ€è¦ **å…©æ¢æ°´å¹³ fence** æ±ºå®šä¸Šä¸‹é‚Šç•Œã€**å…©æ¢å‚ç›´ fence** æ±ºå®šå·¦å³é‚Šç•Œã€‚
  - è‹¥æ°´å¹³å…© fence çš„è·é›¢ç‚º `d`ï¼Œå‚ç›´å…© fence çš„è·é›¢ä¹Ÿç‚º `d`ï¼Œå°±èƒ½å½¢æˆé‚Šé•· `d` çš„æ­£æ–¹å½¢ã€‚
  - å› æ­¤ç›®æ¨™ç­‰åƒ¹æ–¼ï¼šæ‰¾å‡º **åŒæ™‚å‡ºç¾åœ¨æ°´å¹³è·é›¢é›†åˆèˆ‡å‚ç›´è·é›¢é›†åˆ** çš„æœ€å¤§ `d`ã€‚
- **é‚Šç•Œè™•ç†**
  - é¡Œç›®æ¬„ä½æœ‰å¤–æ¡†é‚Šç•Œï¼Œéœ€æŠŠ `1` èˆ‡ `m` åŠ å…¥æ°´å¹³ fencesã€æŠŠ `1` èˆ‡ `n` åŠ å…¥å‚ç›´ fencesï¼Œæ‰èƒ½è€ƒæ…®ä½¿ç”¨æœ€å¤–å´é‚Šç•Œå½¢æˆçš„æ­£æ–¹å½¢ã€‚
- **åšæ³•**
  1. å°‡ `hFences` è¤‡è£½ç‚º `hs`ï¼ŒåŠ å…¥ `1, m` å¾Œæ’åºã€‚
  2. æšèˆ‰ `hs` ä»»å…©é»è·é›¢ `hs[j] - hs[i]`ï¼Œå­˜å…¥ `unordered_set`ï¼ˆæ°´å¹³å¯å½¢æˆçš„æ‰€æœ‰é‚Šé•·å€™é¸ï¼‰ã€‚
  3. å°‡ `vFences` è¤‡è£½ç‚º `vs`ï¼ŒåŠ å…¥ `1, n` å¾Œæ’åºã€‚
  4. æšèˆ‰ `vs` ä»»å…©é»è·é›¢ `dist`ï¼Œè‹¥ `dist` ä¹Ÿåœ¨æ°´å¹³è·é›¢é›†åˆä¸­ï¼Œæ›´æ–°æœ€å¤§é‚Šé•· `maxSide`ã€‚
  5. å›å‚³ `maxSide^2 mod (1e9+7)`ï¼›è‹¥ `maxSide == 0` ä»£è¡¨ä¸å­˜åœ¨æ­£æ–¹å½¢ï¼Œå›å‚³ `-1`ã€‚

---

## æ ¸å¿ƒæ¦‚å¿µï¼ˆKey Conceptsï¼‰

- **è®Šæ•¸**
  - `m, n`ï¼šå ´åœ°çš„é«˜åº¦/å¯¬åº¦ç¯„åœï¼ˆåº§æ¨™é‚Šç•Œï¼‰
  - `hs, vs`ï¼šåŠ å…¥é‚Šç•Œå¾Œçš„æ°´å¹³/å‚ç›´ fence åº§æ¨™åˆ—è¡¨ï¼ˆå·²æ’åºï¼‰
  - `gaps`ï¼š`unordered_set<int>`ï¼Œå„²å­˜æ‰€æœ‰ã€Œæ°´å¹³å…© fence çš„è·é›¢ã€
  - `maxSide`ï¼šç›®å‰æ‰¾åˆ°çš„æœ€å¤§å¯è¡Œæ­£æ–¹å½¢é‚Šé•·
- **è³‡æ–™çµæ§‹**
  - `unordered_set<int>`ï¼šç”¨ä¾†å¿«é€Ÿåˆ¤æ–·æŸå€‹è·é›¢ `dist` æ˜¯å¦å­˜åœ¨æ–¼æ°´å¹³è·é›¢é›†åˆï¼ˆå¹³å‡ `O(1)` æŸ¥è©¢ï¼‰
- **æ¼”ç®—æ³•**
  - å…©å±¤è¿´åœˆæšèˆ‰æ‰€æœ‰ pair distanceï¼ˆåˆ†åˆ¥å° `hs` èˆ‡ `vs`ï¼‰
  - é€éé›†åˆäº¤é›†çš„æ¦‚å¿µï¼Œæ‰¾å‡ºå…±åŒè·é›¢çš„æœ€å¤§å€¼

---

## â±ï¸ è¤‡é›œåº¦åˆ†æï¼ˆComplexityï¼‰

è¨­ `H = hs.size()`ã€`V = vs.size()`ï¼ˆçš†å·²å«é‚Šç•Œï¼‰ï¼š

* **æ™‚é–“è¤‡é›œåº¦**ï¼š`O(H^2 + V^2)`
* **ç©ºé–“è¤‡é›œåº¦**ï¼š`O(H^2)`ï¼ˆ`gaps` æœ€å¤šå­˜ `H*(H-1)/2` å€‹è·é›¢ï¼‰

---

## âœ… æœ€çµ‚å¯¦ä½œï¼ˆCodeï¼‰

```cpp
class Solution {
public:
    static constexpr int MOD = 1e9 + 7;

    int maximizeSquareArea(int m, int n, vector<int>& hFences, vector<int>& vFences) {
        // Transform to: find the maximum distance d that exists in BOTH
        // (all horizontal gaps) and (all vertical gaps).

        vector<int> hs = hFences, vs = vFences;

        // Add boundaries
        hs.push_back(1); hs.push_back(m);
        vs.push_back(1); vs.push_back(n);

        sort(hs.begin(), hs.end());
        sort(vs.begin(), vs.end());

        unordered_set<int> gaps;
        gaps.reserve(hs.size() * (hs.size() - 1) / 2);

        // All horizontal distances
        for (int i = 0; i < (int)hs.size() - 1; ++i) {
            for (int j = i + 1; j < (int)hs.size(); ++j) {
                gaps.insert(hs[j] - hs[i]);
            }
        }

        int maxSide = 0;

        // Check vertical distances against horizontal set
        for (int i = 0; i < (int)vs.size() - 1; ++i) {
            for (int j = i + 1; j < (int)vs.size(); ++j) {
                int dist = vs[j] - vs[i];
                if (gaps.count(dist)) maxSide = max(maxSide, dist);
            }
        }

        if (maxSide == 0) return -1;
        return (long long)maxSide * maxSide % MOD;
    }
};
```

---

## ğŸ“ å°çµï¼ˆSummaryï¼‰

* æ­£æ–¹å½¢çš„é‚Šé•·å¿…é ˆåŒæ™‚æ˜¯ã€Œæ°´å¹³å…© fence è·é›¢ã€èˆ‡ã€Œå‚ç›´å…© fence è·é›¢ã€ã€‚
* å…ˆæŠŠæ‰€æœ‰æ°´å¹³è·é›¢ä¸Ÿé€² hash setï¼Œå†æšèˆ‰å‚ç›´è·é›¢åšæŸ¥è©¢ï¼Œå°±èƒ½æ‰¾åˆ°æœ€å¤§å…±åŒè·é›¢ã€‚
* æœ€å¾Œå›å‚³ `maxSide^2 mod (1e9+7)`ï¼Œä¸å­˜åœ¨å‰‡å›å‚³ `-1`ã€‚

---