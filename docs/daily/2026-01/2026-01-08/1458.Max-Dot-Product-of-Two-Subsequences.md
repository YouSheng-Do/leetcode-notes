# 1458. Max Dot Product of Two Subsequences
## ğŸ§  é¡Œç›®æ€è·¯ï¼ˆIntuitionï¼‰

æœ¬é¡Œè¦æ±‚åœ¨å…©å€‹é™£åˆ— `nums1`ã€`nums2` ä¸­ï¼Œå„è‡ªé¸æ“‡ **é•·åº¦ç›¸åŒä¸”éç©ºçš„ subsequence**ï¼Œä½¿å…¶ **dot product æœ€å¤§**ã€‚

å›°é›£é»åœ¨æ–¼ï¼š

* subsequence **å¯ä»¥è·³éå…ƒç´ **
* ä½† **è‡³å°‘è¦é¸ä¸€å°å…ƒç´ **ï¼ˆä¸èƒ½æ˜¯ç©º subsequenceï¼‰
* dot product å¯èƒ½æ˜¯è² æ•¸ï¼Œå› æ­¤ **ä¸èƒ½ç”¨ 0 ç•¶ä½œåˆå§‹å€¼**

é€™ä½¿å¾—æœ¬é¡Œéå¸¸é©åˆä½¿ç”¨ **å‹•æ…‹è¦åŠƒï¼ˆDynamic Programmingï¼‰** ä¾†è§£ã€‚

---

## ğŸ” å‹•æ…‹è¦åŠƒå®šç¾©ï¼ˆDP Definitionï¼‰

å®šç¾©ï¼š

> `dp[i][j]`ï¼šè¡¨ç¤ºè€ƒæ…® `nums1[i:]` èˆ‡ `nums2[j:]` é€™å…©å€‹ suffixï¼Œæ‰€èƒ½å–å¾—çš„ **æœ€å¤§ dot productï¼ˆéç©º subsequenceï¼‰**

---

## ğŸ”„ ç‹€æ…‹è½‰ç§»ï¼ˆTransitionï¼‰

å°æ–¼æ¯ä¸€çµ„ `(i, j)`ï¼Œæœ‰å››ç¨®é¸æ“‡ï¼š

1. **è·³é `nums1[i]`**

   ```
   dp[i + 1][j]
   ```

2. **è·³é `nums2[j]`**

   ```
   dp[i][j + 1]
   ```

3. **åŒæ™‚é¸ `nums1[i]` èˆ‡ `nums2[j]`ï¼Œä¸¦å»¶ä¼¸å¾ŒçºŒ subsequence**

   ```
   dp[i + 1][j + 1] + nums1[i] * nums2[j]
   ```

4. **åªé¸é€™ä¸€å°ä½œç‚ºæ–°çš„ subsequence èµ·é»**

   > ç‚ºäº†ç¢ºä¿ subsequence éç©ºï¼Œé€™ä¸€æ­¥æ˜¯é—œéµ

   ```
   nums1[i] * nums2[j]
   ```

å› æ­¤ç‹€æ…‹è½‰ç§»ç‚ºï¼š

```
dp[i][j] = max(
    dp[i + 1][j],
    dp[i][j + 1],
    dp[i + 1][j + 1] + nums1[i] * nums2[j],
    nums1[i] * nums2[j]
)
```

---

## ğŸ§± åˆå§‹åŒ–ï¼ˆInitializationï¼‰

* ç•¶ `i == m` æˆ– `j == n` æ™‚ï¼Œå·²ç„¡æ³•å†é¸é…å°å…ƒç´ 
* é€™äº›ç‹€æ…‹ä»£è¡¨ **ä¸åˆæ³• / ä¸å¯é¸**
* ä½¿ç”¨ä¸€å€‹è¶³å¤ å°çš„è² å€¼ä¾†è¡¨ç¤ºï¼š

```cpp
static constexpr int NEG_INF = -1'000'000'000;
```

æ•´å€‹ `dp` è¡¨åˆå§‹åŒ–ç‚º `NEG_INF`ï¼Œå¯é¿å…èª¤é¸ç©º subsequenceã€‚

---

## ğŸ“ è¨ˆç®—é †åºï¼ˆOrderï¼‰

ç”±æ–¼ `dp[i][j]` ä¾è³´ï¼š

* `dp[i + 1][j]`
* `dp[i][j + 1]`
* `dp[i + 1][j + 1]`

å› æ­¤éœ€ **ç”±å³ä¸‹è§’å¾€å·¦ä¸Šè§’ bottom-up å¡«è¡¨**ï¼š

```cpp
for (int i = m - 1; i >= 0; --i)
    for (int j = n - 1; j >= 0; --j)
```

---

## â±ï¸ è¤‡é›œåº¦åˆ†æï¼ˆComplexityï¼‰

* **æ™‚é–“è¤‡é›œåº¦**ï¼š`O(m * n)`
* **ç©ºé–“è¤‡é›œåº¦**ï¼š`O(m * n)`

åœ¨ `m, n â‰¤ 500` çš„é™åˆ¶ä¸‹å¯å®‰å…¨é€šéã€‚

---

## âœ… æœ€çµ‚å¯¦ä½œï¼ˆCodeï¼‰

```cpp
class Solution {
public:
    int maxDotProduct(vector<int>& nums1, vector<int>& nums2) {
        const int m = nums1.size(), n = nums2.size();

        static constexpr int NEG_INF = -1'000'000'000;
        vector<vector<int>> dp(m + 1, vector<int>(n + 1, NEG_INF)); 
        
        for (int i = m - 1; i >= 0; --i) {
            for (int j = n - 1; j >= 0; --j) {
                int prod = nums1[i] * nums2[j];
                dp[i][j] = max({
                    dp[i + 1][j],           // skip nums1[i]
                    dp[i][j + 1],           // skip nums2[j]
                    dp[i + 1][j + 1] + prod,// take both and extend
                    prod                    // start new subsequence
                });
            }
        }

        return dp[0][0];
    }
};
```

---

## ğŸ“ å°çµï¼ˆSummaryï¼‰

* é—œéµåœ¨æ–¼ **å¼·åˆ¶ non-empty subsequence**
* `nums1[i] * nums2[j]` é€™å€‹è½‰ç§»æ˜¯æœ¬é¡Œçš„æ ¸å¿ƒ
* ä½¿ç”¨ `NEG_INF` é¿å…ç©ºé›†åˆå¹²æ“¾
* æ˜¯ä¸€é¡Œéå¸¸ç¶“å…¸ã€å€¼å¾—è¨˜ä½çš„ **2D DP subsequence é¡Œå‹**

---